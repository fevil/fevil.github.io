---
id: 130
title:
  - sshd -Пакет который необходим серверу
author: fevil
layout: post
guid: http://fevil.org.ru/?p=130
permalink: /?p=130
description:
  - Описание установки и настройки OpenSSH сервера.
keywords:
  - ssh, linux, server, debian, корпоративные сети, системный администратор
robotsmeta:
  - index,follow
post_views_count:
  - 5
categories:
  - Linux
---
<p style="text-align: justify;">
  Несомненно у любого системного администратора, в техническом парке, появляются новенькие сервера. И когда радость от монтирования в стойку и пузырчатый полиэтилен с упаковки, перестают бодрить, то  наступает новый праздник &#8211; установка сетевой операционной системы. Предпочитаю ставить голую систему без лишних пакетов, а потом по мере надобности устанавливаю необходимые. Первый пакет в системе &#8211; <strong>openssh-server.</strong>
</p>

<p style="text-align: justify;">
  <!--more-->
  
  <a href="http://fevil.org.ru/wp-content/uploads/2011/04/ssh.jpeg"><img class="aligncenter size-full wp-image-131" title="ssh" src="http://fevil.org.ru/wp-content/uploads/2011/04/ssh.jpeg" alt="ssh" width="184" height="222" /></a>Управлять сервером очень удобно со своего теплого уютного рабочего места. Оно обязательно должно быть таким и помогать в  работе. Комфортное рабочее место, способствует более продуктивной работе. Так вот для управления нашим сервером установим пакет под названием ssh, и сразу же заметим что он потянет за собой два пакета &#8211; openssh-client, openssh-server, о предназначении которых легко догадаться по названию.
</p>

<p style="text-align: center;">
  <strong>apt-get install ssh</strong>
</p>

<p style="text-align: justify;">
  При установке создастся пара ключей, что может занять некоторое время, увидим сообщение об этом. И наш openssh-server уже готов и ждет подключений на 23 порту. Все хорошо, если бы не небольшая паранойя по поводу безопасности. При анализе  системных журналов, очень часто наблюдается большая активность в попытках подключится под случайным пользователем и паролем. Чтобы исключить большинство ненужных записей в системном журнале сделаем некоторые настройки.
</p>

<p style="text-align: justify;">
  Внесем изменения в конфигурационный файл  <strong> /etc/ssh/sshd_config. </strong>Первым делом сменим порт на котором ожидает соединения наш сервис:
</p>

<p style="text-align: center;">
  <strong>Port 3333</strong>
</p>

<p style="text-align: justify;">
  по умолчанию стоит 22 мы поменяли 3333, можно использовать любой свободный, выше 1024-го. Этим мы отвлечем большинство скриптов по поиску ssh-серверов в сети. Далее следует запретить возможность, подключаться под учетной записью <strong>root</strong>, которая по умолчанию включена (при необходимости запретить вход другим системным пользователям  воспользуемся параметром  <code>DenyUsers</code>):
</p>

<p style="text-align: center;">
  <strong>PermitRootLogin no</strong>
</p>

<p style="text-align: justify;">
  а также уменьшим до 60-ти секунд время бездействия, в течении которого сохраняется подключение:
</p>

<p style="text-align: center;">
  <strong>LoginGraceTime 60</strong>
</p>

<p style="text-align: justify;">
  и допишем параметр который сократить число попыток ввода пароля до трех, после трех неверных попыток &#8211; будет разрыв соединения:
</p>

<p style="text-align: center;">
  <strong>MaxAuthTries 3</strong>
</p>

<p style="text-align: justify;">
  Сохраняем конфигурационный файл.  Выполняем перезапуск серверной части openssh, для применений изменений конфигурации. Если используется политика межсетевого экрана &#8211; запретить все, что не разрешено, необходимо добавить правило разрешающее соединение на порт 3333.
</p>

<p style="text-align: justify;">
  В результате проделанных действий мы получили возможность удаленного управления нашим сервером по ssh, убрали его от лишних глаз поменяв порт,  немного обезопасили запретив вход по учетной записи root, и  уменьшеннием количество попыток подбора пароля.
</p>